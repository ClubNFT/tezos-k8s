# tezos-k8s

Helper program to configure the tezos-chain helm chart

## quickstart

``` shell
python3 -m venv .venv
source .venv/bin/activate
pip install mkchain
mkchain my-chain
helm install my-chain tezos-helm/ -f my-chain_values.yaml --namespace tqtezos 
--create-namespace
```

## Generate constants

Your chain is uniquely defined by a set of values such as bootstrap account keys, chain id, timestamp...

Create these values:

``` shell
mkchain $CHAIN_NAME
```

It will create two 2 yaml files, `<$CHAIN_NAME>_values.yaml` and `<$CHAIN_NAME>_invite_values.yaml`.

### Chain parameters

You can modify these parameters by:

* passing parameters to `mkchain`
* modifying the values yaml file generated by `mkchain`
* passing argument to `helm install` commands, which will selectively override the yaml parameters

| YAML Parameter | mkchain argument | Description | Default |
| ----- | ----------- | ------ | ----- |
| docker_image | --docker-image | Version of the Tezos docker image | tezos/tezos:v7-release |
| zerotier_network | --zerotier-network | Zerotier network id for external chain access | |
| zerotier_token | --zerotier-token | Zerotier token for external chain access | |
| bootstrap_peer | --bootstrap-peer | peer ip to join | |
| rpc_autch | --rpc-auth | whether or not an RPC auth server will be spun up | False |

## private chain

### create a self-contained chain
$CHAIN_NAME: is your private chain's name

``` shell
mkchain $CHAIN_NAME
helm install $CHAIN_NAME tezos-helm/ -f ${CHAIN_NAME}_values.yaml
```

## multi-cluster chain

See the [multicluster howto](MULTICLUSTER.md).

## development

See [development](DEVELOPMENT.md).
